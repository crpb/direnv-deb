From: Punit Agrawal <punit@debian.org>
Date: Wed, 4 Jul 2018 07:33:16 +0100
Subject: [PATCH] Respect prefix in addition to DESTDIR in Makefile

---
 Makefile | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/Makefile b/Makefile
index 2c90211..95fec1f 100644
--- a/Makefile
+++ b/Makefile
@@ -1,4 +1,4 @@
-DESTDIR ?= /usr/local
+PREFIX ?= /usr
 
 MAN_MD = $(wildcard man/*.md)
 ROFFS = $(MAN_MD:.md=)
@@ -54,10 +54,10 @@ test: build
 	elvish ./test/direnv-test.elv
 
 install: all
-	install -d $(DESTDIR)/bin
-	install -d $(DESTDIR)/share/man/man1
-	install direnv $(DESTDIR)/bin
-	cp -R man/*.1 $(DESTDIR)/share/man/man1
+	install -d $(DESTDIR)$(PREFIX)/bin
+	install -d $(DESTDIR)$(PREFIX)/share/man/man1
+	install direnv $(DESTDIR)$(PREFIX)/bin
+	cp -R man/*.1 $(DESTDIR)$(PREFIX)/share/man/man1
 
 dist:
 	go get github.com/mitchellh/gox
